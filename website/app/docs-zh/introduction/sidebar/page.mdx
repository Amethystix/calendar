import Link from 'next/link';

# 侧边栏

DayFlow 的侧边栏用于呈现多个日历源、快捷操作与即将到来的事件。默认 UI 已经包含良好的交互，也可以按需自定义Sidebar， [查看侧边栏示例](/docs-zh/features/sidebar)

## 属性参数

侧边栏可以通过在 `useCalendarApp` 的 `useSidebar` 中传递 `SidebarConfig` 对象来进行配置。

| 属性                         | 类型                                                               | 描述                                                                   | 默认值     |
| ---------------------------- | ------------------------------------------------------------------ | ---------------------------------------------------------------------- | ---------- |
| `enabled`                    | `boolean`                                                          | 是否启用侧边栏。                                                       | `true`     |
| `width`                      | `number \| string`                                                 | 侧边栏宽度（例如 `240` 或 `'20%'`）。                                  | `'240px'`  |
| `initialCollapsed`           | `boolean`                                                          | 是否默认折叠侧边栏。                                                   | `false`    |
| `render`                     | `(props: CalendarSidebarRenderProps) => React.ReactNode`           | 完全自定义侧边栏 UI。                                                  | -          |
| `createCalendarMode`         | `'inline' \| 'modal'`                                              | 创建新日历的模式：`inline`（列表内直接编辑）或 `modal`（弹出对话框）。 | `'inline'` |
| `renderCalendarContextMenu`  | `(calendar: CalendarType, onClose: () => void) => React.ReactNode` | 自定义日历项的右键菜单。                                               | -          |
| `renderCreateCalendarDialog` | `(props: CreateCalendarDialogProps) => React.ReactNode`            | 自定义创建日历对话框（在 `modal` 模式下使用）。                        | -          |

## 内置侧边栏

通过 `useSidebar` 打开即可。默认面板内置如下能力：

- 列出所有日历并显示颜色样例
- 勾选控制 `calendarId` 的可见性
- 一键全选/全隐藏
- 折叠/展开以节省空间

```tsx copy {17-20}
import {
  useCalendarApp,
  DayFlowCalendar,
  createDayView,
  createWeekView,
  createMonthView,
  createDragPlugin,
  ViewType,
} from '@dayflow/core';

const calendar = useCalendarApp({
  views: [createMonthView(), createWeekView(), createDayView()],
  plugins: [createDragPlugin()],
  events,
  calendars,
  defaultView: ViewType.WEEK,
  useSidebar: {
    enabled: true,
    width: 280,
  },
});

<DayFlowCalendar calendar={calendar} />;
```

## 完全自定义

也可以使用自定义的Sidebar组件，只需要向 `useSidebar.render` 传入一个渲染函数。它会收到实时的日历状态与辅助操作。

```tsx copy
import type { CalendarSidebarRenderProps } from '@dayflow/core'; // 导入CalendarSidebarRenderProps

const CustomSidebar = ({
  app,
  calendars,
  toggleCalendarVisibility,
  toggleAll,
  isCollapsed,
  setCollapsed,
}: CalendarSidebarRenderProps) => {
  if (isCollapsed) {
    return <button onClick={() => setCollapsed(false)}>展开侧栏</button>;
  }

  return (
    <aside className="flex h-full flex-col gap-4 p-4">
      <header className="flex items-center justify-between">
        <h3 className="text-sm font-semibold">日历列表</h3>
        <div className="space-x-2">
          <button onClick={() => toggleAll(true)}>全显</button>
          <button onClick={() => toggleAll(false)}>全隐</button>
        </div>
      </header>
      <ul className="space-y-2">
        {calendars.map(calendar => (
          <li key={calendar.id} className="flex items-center gap-2 text-sm">
            <input
              type="checkbox"
              checked={calendar.isVisible}
              onChange={() =>
                toggleCalendarVisibility(calendar.id, !calendar.isVisible)
              }
            />
            <span
              className="h-2.5 w-2.5 rounded-full"
              style={{ backgroundColor: calendar.colors.eventColor }}
            />
            {calendar.name}
          </li>
        ))}
      </ul>
      <section className="rounded-xl border border-slate-200 p-3 text-xs">
        <p>当前日期：{app.getCurrentDate().toDateString()}</p>
        <p>事件总数：{app.getEvents().length}</p>
      </section>
    </aside>
  );
};

const calendar = useCalendarApp({
  /* ... */
  useSidebar: {
    enabled: true,
    width: 320,
    render: props => <CustomSidebar {...props} />,
  },
});
```

`CalendarSidebarRenderProps` 同时提供了 `toggleCalendarVisibility`、`toggleAll`、`isCollapsed`、`setCollapsed` 以及当前的 `app` 实例，方便在自定义侧栏里读取事件列表、选定日期等信息。
更多交互示例请参考 [功能 · 侧边栏](/docs-zh/features/sidebar)。

## 相关文档

- [快速开始](/docs-zh/introduction) - 基本设置
- [事件](/docs-zh/introduction/events) - 事件管理
- [视图](/docs-zh/introduction/views) - 日历视图
